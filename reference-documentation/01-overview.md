# Обзор Приложения AI-Агентов

## Введение

Это референсное приложение для управления AI-агентами, расположенное по адресу: https://aai.widgets.wearekwid.com/

Приложение позволяет создавать и настраивать AI-агентов, которые автоматизируют коммуникацию с клиентами через интеграцию с CRM системами и мессенджерами.

---

## Основные возможности

### 1. Управление AI-агентами
- Создание и настройка агентов
- Выбор AI-модели (GPT-4, Claude, Gemini)
- Настройка инструкций и поведения
- Управление расписанием работы
- Определение языка общения

### 2. Интеграция с CRM
- Подключение к Kommo/amoCRM
- Выбор доступных полей сделок и контактов
- Чтение и обновление данных CRM
- Создание задач и примечаний

### 3. Автоматизация через триггеры
- Настройка условий срабатывания
- Автоматические действия при событиях
- Интеграция с CRM событиями
- Множественные действия на один триггер

### 4. Цепочки действий (Sequences)
- Создание последовательностей действий
- Задержки между шагами
- Условная логика и ветвление
- Генерация персонализированных сообщений

### 5. Интеграции
- Google Calendar (управление встречами)
- Kommo CRM (работа со сделками)
- Мессенджеры (WhatsApp, Telegram)
- Email сервисы

---

## Структура приложения

### Главная страница
Список всех созданных агентов с возможностью:
- Просмотра статуса (активен/неактивен)
- Редактирования
- Удаления
- Создания нового агента

### Страница редактирования агента

Состоит из 6 вкладок:

#### 1. Основные
- Название агента
- Статус активности
- Инструкции для агента

#### 2. Сделки и контакты
- Выбор полей сделок для доступа
- Выбор полей контактов для доступа
- Настройка прав доступа к CRM данным

#### 3. Триггеры
- Список триггеров
- Создание новых триггеров
- Настройка условий и действий
- Включение/выключение триггеров

#### 4. Цепочки
- Список цепочек
- Конструктор цепочек
- Настройка шагов и задержек
- Управление последовательностями

#### 5. Интеграции
- Список доступных интеграций
- Подключение сервисов
- Настройка параметров интеграций
- Управление учетными данными

#### 6. Дополнительно
- Выбор AI-модели
- Настройка определения языка
- Расписание работы агента
- Дополнительные параметры

---

## Технический стек

### Frontend
- **Framework**: React
- **UI Library**: Custom components
- **State Management**: React Context / Redux
- **Routing**: React Router

### Backend
- **API**: REST API
- **Database**: PostgreSQL (Supabase)
- **Authentication**: OAuth 2.0
- **Job Queue**: для выполнения цепочек

### Внешние интеграции
- **CRM**: Kommo/amoCRM API v4
- **AI**: OpenAI, Anthropic Claude, Google Gemini
- **Calendar**: Google Calendar API
- **Messaging**: WhatsApp Business API, Telegram Bot API

---

## Пользовательские сценарии

### Сценарий 1: Создание простого агента
1. Создать нового агента
2. Задать название и инструкции
3. Выбрать AI-модель
4. Подключить CRM интеграцию
5. Выбрать доступные поля
6. Активировать агента

### Сценарий 2: Настройка автоответа на новые сделки
1. Перейти на вкладку "Триггеры"
2. Создать новый триггер
3. Условие: "Статус сделки = Новая"
4. Действие: "Отправить сообщение в WhatsApp"
5. Настроить текст сообщения
6. Сохранить и активировать

### Сценарий 3: Создание цепочки онбординга
1. Перейти на вкладку "Цепочки"
2. Создать новую цепочку
3. Добавить шаги:
   - Отправить приветственное сообщение
   - Задержка 1 день
   - Отправить информацию о продукте
   - Задержка 2 дня
   - Создать задачу для менеджера
4. Сохранить и активировать

---

## Ключевые особенности

### Условная логика
- Триггеры срабатывают только при выполнении условий
- Цепочки могут иметь ветвления
- Поддержка сложных условий (И/ИЛИ)

### Персонализация
- Использование переменных в сообщениях
- AI генерация контента на основе контекста
- Доступ к данным CRM для персонализации

### Масштабируемость
- Множество агентов в одном аккаунте
- Неограниченное количество триггеров и цепочек
- Поддержка высоких нагрузок

### Безопасность
- Шифрование учетных данных
- OAuth авторизация
- Row-level security
- Логирование всех действий

---

## Бизнес-логика

### Приоритет выполнения
1. Триггеры срабатывают мгновенно при событии
2. Цепочки выполняются асинхронно
3. Задержки в цепочках точные (минуты/часы/дни)

### Обработка ошибок
- Повторные попытки при сбоях API
- Логирование ошибок
- Уведомления администратора
- Откат изменений при критических ошибках

### Лимиты и ограничения
- Максимум 10 действий в триггере
- Максимум 20 шагов в цепочке
- Лимиты API внешних сервисов
- Rate limiting для предотвращения спама

---

## Метрики и аналитика

### Отслеживаемые метрики
- Количество обработанных сообщений
- Успешность срабатывания триггеров
- Процент завершения цепочек
- Использование AI токенов
- Время ответа агента

### Логирование
- История всех действий
- Логи выполнения триггеров
- Логи выполнения цепочек
- Ошибки и исключения

---

## Дальнейшее развитие

### Планируемые функции
- A/B тестирование сообщений
- Расширенная аналитика
- Больше интеграций
- Визуальный конструктор условий
- Шаблоны агентов
- Marketplace интеграций

---

## Документация

Полная документация находится в папке `reference-documentation/`:

- `01-overview.md` - Обзор приложения
- `02-main-pages/` - Документация главных страниц (Список агентов, Создание)
- `03-agent-editor/` - Детальное описание всех вкладок редактора
- `04-ui-components/` - Документация UI компонентов и Дизайн-системы
- `05-data-flow/` - Потоки данных и API
- `06-business-logic/` - Бизнес-логика и правила
- `screenshots/` - Скриншоты всех экранов

---

## Контакты и поддержка

Для вопросов и предложений обращайтесь к команде разработки.
